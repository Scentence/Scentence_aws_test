# ==================================================
# Scentence AWS EC2 배포용 환경변수 템플릿
# ==================================================
# 이 파일을 .env로 복사하고 실제 값으로 채워주세요
# 주의: .env 파일은 절대 Git에 커밋하지 마세요!
SCENT_MEMBER_DAILY_LIMIT=100
SCENT_GUEST_SESSION_LIMIT=50

# ==================================================
# 데이터베이스 설정 (Database Configuration)
# ==================================================
# RDS 또는 외부 PostgreSQL 서버 정보
DB_HOST=
DB_PORT=5435
DB_USER=postgres
DB_PASSWORD=
DB_NAME=perfume_db
RECOM_DB_NAME=recom_db
MEMBER_DB_NAME=member_db

# ==================================================
# AWS S3 & CloudFront (프로필 이미지 저장용)
# ==================================================
AWS_ACCESS_KEY_ID=your_access_key_id
AWS_SECRET_ACCESS_KEY=your_secret_access_key
AWS_REGION=ap-northeast-2
AWS_BUCKET_NAME=your-bucket-name
CLOUDFRONT_DOMAIN=https://your-distribution.cloudfront.net

# 프로필 이미지 설정 (선택사항, 기본값 사용 가능)
PROFILE_IMAGE_MAX_MB=5
PROFILE_IMAGE_SIZE=256
PROFILE_IMAGE_FORMAT=webp
S3_PREFIX_PROFILE_IMAGES=profile_images

# ==================================================
# OpenAI & LangSmith (챗봇 기능용)
# ==================================================
OPENAI_API_KEY=
LANGSMITH_API_KEY=

# ==================================================
# 관리자 설정 (Admin Configuration)
# ==================================================
ADMIN_EMAILS=admin@example.com,admin2@example.com
NEXT_PUBLIC_ADMIN_EMAILS=admin@example.com,admin2@example.com

# ==================================================
# NextAuth (OAuth 로그인)
# ==================================================
# EC2 Public IP 또는 도메인 주소
# 예: http://12.34.56.78:3000 또는 https://yourdomain.com
NEXTAUTH_URL=http://퍼블릭IP:3000

# 랜덤 문자열 생성 (아래 명령어 사용):
# openssl rand -base64 32
NEXTAUTH_SECRET=

# 카카오 개발자 콘솔에서 발급받은 키
# https://developers.kakao.com/console
KAKAO_CLIENT_ID=
KAKAO_CLIENT_SECRET=

# ==================================================
# 서비스 간 내부 통신 URL (Docker Compose 내부)
# ==================================================
# 기본값 사용 권장 (docker-compose 서비스명 사용)
BACKEND_INTERNAL_URL=http://backend:8000
LAYERING_API_URL=http://layering:8002
SCENTMAP_INTERNAL_URL=http://scentmap:8001

# ==================================================
# 외부 접근 URL (브라우저에서 접근하는 주소)
# ==================================================
# ALB 사용 시: ALB 주소
# ALB 없이 직접 접근 시: EC2 Public IP
NEXT_PUBLIC_API_URL=http://퍼블릭IP:3000

# ==================================================
# CORS Origins (브라우저에서 접근 허용할 주소)
# ==================================================
# 쉼표로 구분하여 여러 주소 지정 가능
# ALB 또는 CloudFront 주소를 포함해야 함
# ,https://YOUR_DOMAIN
BACKEND_CORS_ORIGINS=http://localhost:3000,http://퍼블릭IP:3000,https://YOUR_DOMAIN
LAYERING_CORS_ORIGINS=http://localhost:3000,http://퍼블릭IP:3000,https://YOUR_DOMAIN
CORS_ORIGINS=http://localhost:3000,http://퍼블릭IP:3000

# ==================================================
# 기타 설정
# ==================================================
NEXT_PUBLIC_ENABLE_AUTH=true

# ==================================================
# 참고사항
# ==================================================
# 1. NEXTAUTH_URL과 CORS Origins에 같은 주소를 사용하세요
# 2. 카카오 개발자 콘솔의 Redirect URI 설정:
#    ${NEXTAUTH_URL}/api/auth/callback/kakao
#    예: http://12.34.56.78:3000/api/auth/callback/kakao
# 3. HTTPS 사용 시 모든 URL을 https://로 변경하세요
# 4. ALB 사용 시 Health Check 경로:
#    - Frontend: /api/backend-openapi
#    - Backend: /openapi.json
#    - Scentmap: /health
#    - Layering: /health
