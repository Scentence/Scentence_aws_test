# 향수 검색 고도화 아이디어 (Search Sophistication Ideas)

사용자가 "이브생로랑"이라고 입력해도 "입생로랑"을 찾을 수 있도록(=유사도 검색) 하는 3가지 단계별 전략입니다.

## 1. [Best] 데이터베이스 확장 기능 (pg_trgm) 도입
가장 정석적이고 강력한 방법입니다. PostgreSQL의 `pg_trgm` (Trigram) 확장을 사용하면 텍스트 간의 **유사도(Similarity)** 를 계산할 수 있습니다.

- **원리**: 글자를 3글자씩 쪼개서 얼마나 겹치는지 계산합니다.
    - `입생로랑` -> `입생로`, `생로랑`
    - `이브생로랑` -> `이브생`, `브생로`, `생로랑`
    - ==> "생로랑"이 겹치므로 유사도가 높게 나옵니다.
- **구현**:
    1. DB에 `CREATE EXTENSION pg_trgm;` 실행.
    2. 쿼리를 `WHERE name % '이브생로랑'` (유사도 매칭 연산자) 형태로 변경.
- **장점**: 별도 사전 등록 없이도 대부분의 오타와 유사 발음을 자동으로 잡아냅니다.

## 2. [Good] 확장 동의어 사전 (Enhanced Synonym Dictionary)
현재 사용 중인 Python 딕셔너리(`synonyms`)를 대폭 확장하거나, DB 테이블로 관리하여 유연하게 추가하는 방식입니다.

- **구현**:
    - `synonyms` 딕셔너리에 한국어 발음 변형을 대거 등록합니다.
    - 예: `{"입생로랑": ["이브생로랑", "입생", "ysl"], "에르메스": ["헤르메스"]}`
- **장점**: 구현이 가장 쉽고 빠릅니다. (코드 몇 줄 수정)
- **단점**: 세상의 모든 오타를 일일이 등록할 수 없습니다.

## 3. [Advanced] AI/Vector Search (임베딩 검색)
텍스트의 의미를 벡터(숫자)로 변환하여 검색합니다.

- **원리**: "이브생로랑"과 "입생로랑"은 글자가 달라도 같은 대상의 벡터값을 가집니다.
- **장점**: 의미 기반 검색 가능 ("여름에 뿌리기 좋은 향수" 검색 가능).
- **단점**: 구축 비용과 공수가 큽니다 (OpenAI API 비용 발생 등).

---

## 💡 추천 방향 (Recommendation)

**1단계(즉시 적용)** 로 **[Level 2] 동의어 사전**에 "이브생로랑", "헤르메스" 등 자주 틀리는 주요 브랜드만 추가하는 것을 추천합니다. 가성비가 가장 좋습니다.

만약 **"모든 오타를 다 잡고 싶다"** 면 **[Level 1] pg_trgm 도입**을 진행해야 합니다. 다만 DB 설정 변경(Extension 설치)이 필요합니다.
